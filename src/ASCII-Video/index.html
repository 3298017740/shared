<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>ASCII-Video Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            background: #000;
            color: #fff;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
        }
        
        #enter {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            width: 100%;
            height: 100%;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        #cover-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            margin: 0 auto;
        }
        
        #cover {
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
            display: block;
        }
        
        .play-button {
            margin-top: 25px;
            padding: 16px 40px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff0033, #ff5555);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(255, 0, 51, 0.4);
            position: relative;
            z-index: 5;
            width: 80%;
            max-width: 300px;
            letter-spacing: 1px;
        }
        
        .play-button:hover, .play-button:active {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 0, 51, 0.5);
        }
        
        #video-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 10;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        #player {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .controls {
            position: absolute;
            bottom: 25px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 0 20px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.25);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            color: white;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.35);
            transform: scale(1.1);
        }
        
        #close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 11;
            backdrop-filter: blur(8px);
            transition: all 0.3s;
        }
        
        #close-btn:hover {
            background: rgba(255, 0, 51, 0.7);
            transform: scale(1.1);
        }
        
        .volume-control {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .volume-slider {
            position: absolute;
            bottom: 65px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .volume-control:hover .volume-slider {
            opacity: 1;
            pointer-events: all;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ff0033;
            cursor: pointer;
        }
        
        /* Ê®™Â±èÊèêÁ§∫ */
        .orientation-warning {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 100;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 30px;
        }
        
        .orientation-warning i {
            font-size: 52px;
            margin-bottom: 25px;
        }
        
        .orientation-warning p {
            font-size: 20px;
            max-width: 85%;
            line-height: 1.6;
        }
        
        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            #enter {
                padding: 15px;
            }
            
            .play-button {
                padding: 14px 32px;
                font-size: 18px;
                width: 85%;
            }
            
            .controls {
                bottom: 20px;
                gap: 15px;
            }
            
            .control-btn, #close-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            #close-btn {
                top: 20px;
                right: 20px;
            }
        }
        
        @media (max-width: 480px) {
            #cover-container {
                width: 95%;
            }
            
            .play-button {
                margin-top: 20px;
                padding: 12px 28px;
                font-size: 16px;
                width: 90%;
            }
            
            .controls {
                gap: 12px;
                bottom: 15px;
            }
            
            .control-btn, #close-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            #close-btn {
                top: 15px;
                right: 15px;
            }
            
            .orientation-warning p {
                font-size: 18px;
            }
        }
        
        /* Ê®™Â±èÊ£ÄÊµã */
        @media (orientation: landscape) and (max-height: 500px) {
            .orientation-warning {
                display: flex;
            }
            
            #enter, #video-container {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <!-- Ëá™ÁªòÂ∞ÅÈù¢ -->
    <div id="enter">
        <div id="cover-container">
            <canvas id="cover"></canvas>
        </div>
        <button class="play-button" onclick="playVideo()">ÁÇπÂáªÊí≠Êîæ</button>
    </div>

    <!-- ËßÜÈ¢ëÂÆπÂô® -->
    <div id="video-container">
        <button id="close-btn" onclick="closeVideo()">‚úï</button>
        <video id="player" src="https://gitee.com/grasp-canal/resource/raw/master/src/ASCII-Video/ji.mp4" autoplay muted loop></video>
        <div class="controls">
            <button class="control-btn" onclick="togglePlay()" id="play-btn">‚è∏Ô∏è</button>
            <div class="volume-control">
                <button class="control-btn" onclick="toggleMute()" id="mute-btn">üîá</button>
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.01" value="0" oninput="changeVolume(this.value)">
            </div>
            <button class="control-btn" onclick="toggleFullscreen()">‚õ∂</button>
        </div>
    </div>
    
    <!-- Ê®™Â±èÊèêÁ§∫ -->
    <div class="orientation-warning">
        <i>üì±</i>
        <p>‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑ‰ΩìÈ™åÔºåËØ∑Â∞ÜÊâãÊú∫ÊóãËΩ¨Ëá≥Á´ñÂ±èÊ®°Âºè</p>
    </div>

    <script>
        // ÂàùÂßãÂåñCanvasÂ∞∫ÂØ∏
        function initCanvasSize() {
            const canvas = document.getElementById('cover');
            const container = document.getElementById('cover-container');
            const maxWidth = Math.min(640, window.innerWidth - 40);
            const height = maxWidth * 0.5625; // 16:9ÊØî‰æã
            
            canvas.width = maxWidth;
            canvas.height = height;
            container.style.width = maxWidth + 'px';
            
            return { width: maxWidth, height: height };
        }
        
        // Á≤íÂ≠êÁ≥ªÁªü
        class ParticleSystem {
            constructor(canvas, particleCount = 50) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.mouse = { x: null, y: null, radius: 100 };
                this.animationId = null;
                
                // ÂàùÂßãÂåñÁ≤íÂ≠ê
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push(this.createParticle());
                }
                
                // Èº†Ê†áÁßªÂä®ÁõëÂê¨
                canvas.addEventListener('mousemove', (e) => {
                    const rect = canvas.getBoundingClientRect();
                    this.mouse.x = e.clientX - rect.left;
                    this.mouse.y = e.clientY - rect.top;
                });
                
                canvas.addEventListener('mouseleave', () => {
                    this.mouse.x = null;
                    this.mouse.y = null;
                });
                
                // Ëß¶Êë∏‰∫ã‰ª∂ÁõëÂê¨ÔºàÁßªÂä®Á´ØÔºâ
                canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    const rect = canvas.getBoundingClientRect();
                    this.mouse.x = e.touches[0].clientX - rect.left;
                    this.mouse.y = e.touches[0].clientY - rect.top;
                }, { passive: false });
                
                canvas.addEventListener('touchend', () => {
                    this.mouse.x = null;
                    this.mouse.y = null;
                });
            }
            
            createParticle() {
                const colors = [
                    `rgba(255, ${Math.floor(Math.random() * 100)}, ${Math.floor(Math.random() * 100)}, ${Math.random() * 0.5 + 0.5})`,
                    `rgba(255, 100, 100, ${Math.random() * 0.5 + 0.3})`,
                    `rgba(100, 100, 255, ${Math.random() * 0.5 + 0.3})`,
                    `rgba(100, 255, 100, ${Math.random() * 0.5 + 0.3})`
                ];
                
                return {
                    x: Math.random() * this.canvas.width,
                    y: Math.random() * this.canvas.height,
                    size: Math.random() * 3 + 1,
                    speedX: (Math.random() - 0.5) * 2,
                    speedY: (Math.random() - 0.5) * 2,
                    color: colors[Math.floor(Math.random() * colors.length)]
                };
            }
            
            drawStaticElements() {
                const ctx = this.ctx;
                const canvas = this.canvas;
                
                // ËÉåÊôØÊ∏êÂèò
                const g = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                g.addColorStop(0, '#111');
                g.addColorStop(1, '#330033');
                ctx.fillStyle = g;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // ‰∏≠Èó¥Â§ß‰∏âËßí‚ñ∂
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const size = Math.min(canvas.width, canvas.height) * 0.1;
                ctx.moveTo(centerX - size, centerY - size);
                ctx.lineTo(centerX - size, centerY + size);
                ctx.lineTo(centerX + size, centerY);
                ctx.closePath();
                ctx.fill();

                // ÊñáÂ≠ó
                ctx.fillStyle = '#ff0033';
                ctx.font = `bold ${Math.max(24, canvas.width * 0.06)}px sans-serif`;
                ctx.textAlign = 'center';
                ctx.fillText('PLAY', centerX, centerY + size * 3);
            }
            
            update() {
                // Êõ¥Êñ∞Á≤íÂ≠ê‰ΩçÁΩÆ
                for (let i = 0; i < this.particles.length; i++) {
                    let p = this.particles[i];
                    
                    // ÁßªÂä®Á≤íÂ≠ê
                    p.x += p.speedX;
                    p.y += p.speedY;
                    
                    // ËæπÁïåÊ£ÄÊµã - ÂèçÂºπ
                    if (p.x <= 0 || p.x >= this.canvas.width) {
                        p.speedX = -p.speedX;
                        p.x = p.x <= 0 ? 0 : this.canvas.width;
                    }
                    
                    if (p.y <= 0 || p.y >= this.canvas.height) {
                        p.speedY = -p.speedY;
                        p.y = p.y <= 0 ? 0 : this.canvas.height;
                    }
                    
                    // Èº†Ê†á‰∫§‰∫í
                    if (this.mouse.x !== null && this.mouse.y !== null) {
                        let dx = this.mouse.x - p.x;
                        let dy = this.mouse.y - p.y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < this.mouse.radius) {
                            let angle = Math.atan2(dy, dx);
                            let force = (this.mouse.radius - distance) / this.mouse.radius;
                            p.speedX -= Math.cos(angle) * force * 0.5;
                            p.speedY -= Math.sin(angle) * force * 0.5;
                        }
                    }
                    
                    // ÈÄüÂ∫¶Ë°∞Âáè
                    p.speedX *= 0.99;
                    p.speedY *= 0.99;
                }
            }
            
            draw() {
                // ÁªòÂà∂ÈùôÊÄÅÂÖÉÁ¥†
                this.drawStaticElements();
                
                // ÁªòÂà∂Á≤íÂ≠ê
                for (let i = 0; i < this.particles.length; i++) {
                    let p = this.particles[i];
                    
                    this.ctx.fillStyle = p.color;
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // ÁªòÂà∂Á≤íÂ≠êÈó¥ÁöÑËøûÁ∫ø
                    for (let j = i + 1; j < this.particles.length; j++) {
                        let p2 = this.particles[j];
                        let dx = p.x - p2.x;
                        let dy = p.y - p2.y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            this.ctx.strokeStyle = `rgba(255, 255, 255, ${0.2 * (1 - distance/100)})`;
                            this.ctx.lineWidth = 0.5;
                            this.ctx.beginPath();
                            this.ctx.moveTo(p.x, p.y);
                            this.ctx.lineTo(p2.x, p2.y);
                            this.ctx.stroke();
                        }
                    }
                }
            }
            
            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.update();
                this.draw();
                this.animationId = requestAnimationFrame(() => this.animate());
            }
            
            start() {
                if (!this.animationId) {
                    this.animate();
                }
            }
            
            stop() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
            
            resize(width, height) {
                this.canvas.width = width;
                this.canvas.height = height;
                
                // ÈáçÊñ∞ÂàùÂßãÂåñÁ≤íÂ≠ê
                this.particles = [];
                for (let i = 0; i < 50; i++) {
                    this.particles.push(this.createParticle());
                }
            }
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let particleSystem;
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        function initPage() {
            const canvasSize = initCanvasSize();
            const cv = document.getElementById('cover');
            
            // ÂàùÂßãÂåñÁ≤íÂ≠êÁ≥ªÁªü
            particleSystem = new ParticleSystem(cv, Math.min(50, Math.floor(canvasSize.width * canvasSize.height / 500)));
            particleSystem.start();
            
            // ÂàùÂßãÂåñÈü≥ÈáèÊéßÂà∂
            const volumeSlider = document.getElementById('volume-slider');
            volumeSlider.value = 0; // ÂàùÂßãÈùôÈü≥
            
            // ÂàùÂßãÂåñÈùôÈü≥ÊåâÈíÆÁä∂ÊÄÅ
            updateMuteButton();
        }
        
        // ÂàùÂßãÂåñ
        window.addEventListener('load', initPage);
        window.addEventListener('resize', function() {
            const canvasSize = initCanvasSize();
            if (particleSystem) {
                particleSystem.resize(canvasSize.width, canvasSize.height);
            }
        });

        /* ===== Êí≠ÊîæÈÄªËæë ===== */
        const player = document.getElementById('player');
        const videoContainer = document.getElementById('video-container');
        
        function playVideo() {
            // ÂÅúÊ≠¢Á≤íÂ≠êÂä®Áîª
            if (particleSystem) {
                particleSystem.stop();
            }
            
            document.getElementById('enter').style.display = 'none';
            videoContainer.style.display = 'flex';
            
            // Â∞ùËØïËá™Âä®Êí≠Êîæ
            player.play().catch(e => {
                console.log("Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢ÔºåÈúÄË¶ÅÁî®Êà∑‰∫§‰∫í");
            });
            
            // Êõ¥Êñ∞Êí≠ÊîæÊåâÈíÆÁä∂ÊÄÅ
            document.getElementById('play-btn').textContent = '‚è∏Ô∏è';
        }
        
        function closeVideo() {
            videoContainer.style.display = 'none';
            document.getElementById('enter').style.display = 'flex';
            player.pause();
            player.currentTime = 0;
            
            // ÈáçÊñ∞ÂêØÂä®Á≤íÂ≠êÂä®Áîª
            if (particleSystem) {
                particleSystem.start();
            }
            
            // ÈÄÄÂá∫ÂÖ®Â±è
            if (document.fullscreenElement) {
                document.exitFullscreen().catch(() => {});
            }
            
            // ÈáçÁΩÆÊí≠ÊîæÊåâÈíÆ
            document.getElementById('play-btn').textContent = '‚è∏Ô∏è';
        }
        
        function togglePlay() {
            const playBtn = document.getElementById('play-btn');
            if (player.paused) {
                player.play();
                playBtn.textContent = '‚è∏Ô∏è';
            } else {
                player.pause();
                playBtn.textContent = '‚ñ∂Ô∏è';
            }
        }
        
        function toggleMute() {
            player.muted = !player.muted;
            updateMuteButton();
            
            // Â¶ÇÊûúÂèñÊ∂àÈùôÈü≥ÔºåËÆæÁΩÆÈü≥Èáè‰∏∫50%
            if (!player.muted && player.volume === 0) {
                player.volume = 0.5;
                document.getElementById('volume-slider').value = 0.5;
            }
        }
        
        function changeVolume(value) {
            player.volume = value;
            player.muted = (value == 0);
            updateMuteButton();
        }
        
        function updateMuteButton() {
            const muteBtn = document.getElementById('mute-btn');
            muteBtn.textContent = player.muted ? 'üîá' : 'üîä';
            
            // ÂêåÊ≠•Èü≥ÈáèÊªëÂùó
            document.getElementById('volume-slider').value = player.muted ? 0 : player.volume;
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(() => {});
            } else {
                document.exitFullscreen().catch(() => {});
            }
        }
        
        // ÁõëÂê¨ÂÖ®Â±èÂèòÂåñ
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                // ÈÄÄÂá∫ÂÖ®Â±èÊó∂‰∏çÂÅöÁâπÊÆäÂ§ÑÁêÜ
            }
        });
        
        // ÈîÆÁõòÊéßÂà∂
        document.addEventListener('keydown', (e) => {
            if (videoContainer.style.display === 'flex') {
                switch(e.key) {
                    case ' ':
                        togglePlay();
                        break;
                    case 'Escape':
                        closeVideo();
                        break;
                    case 'm':
                        toggleMute();
                        break;
                    case 'f':
                        toggleFullscreen();
                        break;
                    case 'ArrowUp':
                        changeVolume(Math.min(1, player.volume + 0.1));
                        break;
                    case 'ArrowDown':
                        changeVolume(Math.max(0, player.volume - 0.1));
                        break;
                }
            }
        });
        
        // Èò≤Ê≠¢ÁßªÂä®Á´Ø‰∏ãÊãâÂà∑Êñ∞
        document.addEventListener('touchmove', function(e) {
            if (videoContainer.style.display !== 'flex') {
                e.preventDefault();
            }
        }, { passive: false });
        
        // ËßÜÈ¢ë‰∫ã‰ª∂ÁõëÂê¨
        player.addEventListener('volumechange', function() {
            updateMuteButton();
        });
    </script>
</body>

</html>


